<% content_for :head do %>
    <style>
        #reach {
            width: 960px;
            height: 310px;
        }
    </style>
<% end %>

<% content_for :footer do %>
    <%= erb :_for_svg_supported_browsers, :locals => {:content => javascript_include_tag("reach", "modules/todays-activity")} %>
<% end %>

<svg style="position: absolute">
  <defs>
    <linearGradient id="gradient_for_yesterday" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color: #B3B3B3; stop-opacity: 1"/>
      <stop offset="50%" style="stop-color: white; stop-opacity: 1"/>
    </linearGradient>
  </defs>
</svg>

<div id="todays-activity-module" class="module">
  <%= graph_image_tag 'todays-activity' %>

  <div class="datainsight-hidden">
    <div class="module-header left">
      <h3 class="graph-info">GOV.UK's recent traffic</h3>

      <p class="graph-heading">Hourly GOV.UK traffic today compared with yesterday and
        <strong>the average over the last 30 days</strong></p>
    </div>
    <div class="right small-text">
      <span id="live_at"></span>

      <div class="legend">
        <div class="legend-row">
        <div class="small-shim">
          <div class="right small-square graph-green"></div>
          <div class="small-text right" style="width: 8px; text-align: center">+</div>
          <div class="small-text right legend-label">Change from</div>
        </div>
        <br style="clear: both"/>

        <div class="small-shim">
          <div class="right small-square graph-red"></div>
          <div class="small-text right" style="width: 8px; text-align: center">-</div>
          <div class="small-text right legend-label">30 day average</div>
        </div>
        <br style="clear: both"/>
        </div>

        <div class="small-shim legend-row">
          <div class="right small-square" id="yesterday"></div>
          <div class="small-text right legend-label">Yesterday</div>
        </div>
        <br style="clear: both"/>

        <div class="small-shim legend-row">
          <div class="right small-square" id="monthly-average"></div>
          <div class="small-text right legend-label">30 day average</div>
        </div>
        <br style="clear: both"/>
      </div>
    </div>
    <div style="clear: both"></div>
    <div id="reach"></div>
    <div>
      <p class="graph-source">Source: Google Analytics</p>
    </div>
  </div>
</div>
